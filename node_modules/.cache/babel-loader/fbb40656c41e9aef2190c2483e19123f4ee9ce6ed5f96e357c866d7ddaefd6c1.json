{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import loginPic from\"./images/image.png\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const loaderStyles={width:\"75px\",aspectRatio:\"1\",display:\"grid\"};const Login=_ref=>{let{onLogin}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const loginApiLink=\"https://student360-api.onrender.com/api/auth\";// useEffect(() => {\n//   // Check if the user is authenticated (you may need to adjust this based on your authentication logic)\n//   const isAuthenticated = sessionStorage.getItem(\"accessToken\");\n//   // If authenticated, redirect to another page (e.g., dashboard)\n//   if (isAuthenticated) {\n//     navigate(\"/dashboard\");\n//   }\n// }, [navigate]);\nconst handleLogin=async()=>{try{setIsLoading(true);const response=await fetch(loginApiLink,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error);}const responseData=await response.json();const token=responseData.token;sessionStorage.setItem(\"accessToken\",token);const Toast=Swal.mixin({toast:true,position:\"top-end\",showConfirmButton:false,timer:3000,timerProgressBar:true,didOpen:toast=>{toast.onmouseenter=Swal.stopTimer;toast.onmouseleave=Swal.resumeTimer;}});Toast.fire({icon:\"success\",title:\"Login successful\"});navigate(\"/users\");if(onLogin){onLogin();}}catch(error){const Toast=Swal.mixin({toast:true,position:\"top-end\",showConfirmButton:false,timer:3000,timerProgressBar:true,didOpen:toast=>{toast.onmouseenter=Swal.stopTimer;toast.onmouseleave=Swal.resumeTimer;}});Toast.fire({icon:\"error\",title:\"\".concat(error.message)});}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row max-h-screen items-center overflow-hidden bg-white\",children:[/*#__PURE__*/_jsx(\"img\",{src:loginPic,alt:\"Login Pic\",className:\"w-full lg:w-1/2 lg:h-screen lg:block hidden object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full min-h-screen items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex text-right justify-end\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"text-2xl flex text-[#3B4FFE] mt-18 lg:mt-16 p-6 font-semibold\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-serif\",children:\"Studenthub\"}),\" \",/*#__PURE__*/_jsx(\"h1\",{className:\"text-[#3B4FFE] font-magiona-display\",children:\"360\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-screen lg:w-full min-h-screen items-center p-20 lg:p-52\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl text-[#3D50FF] font-semibold mb-4 text-left lg:text-left\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"max-w-screen \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium \",children:\"Email address:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"mt-1 p-2 w-full border border-black rounded-md\",onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"mt-1 p-2 w-full border-black border rounded-md bg-white\",onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-right text-[#3A4FFE] text-sm mt-1\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:\"Forgot Password?\"})})]}),/*#__PURE__*/_jsx(Link,{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-[#3A4FFE] text-white p-2 rounded-md w-full hover:bg-gray-800 font-extrabold\",onClick:handleLogin,children:\"Log In\"})})]}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",style:loaderStyles,children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader:before\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loader:after\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-sm text-center lg:text-center\",children:[\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"text-[#3A4FFE]\",children:\"Sign Up\"})]})]})]})]});};export function get_user(){}export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","loginPic","Swal","jsx","_jsx","jsxs","_jsxs","loaderStyles","width","aspectRatio","display","Login","_ref","onLogin","email","setEmail","password","setPassword","isLoading","setIsLoading","navigate","loginApiLink","handleLogin","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","error","responseData","token","sessionStorage","setItem","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","onmouseenter","stopTimer","onmouseleave","resumeTimer","fire","icon","title","concat","message","className","children","src","alt","to","htmlFor","type","id","onChange","e","target","value","onClick","style","get_user"],"sources":["/Users/mac/Documents/Coding/admin-studenthub360/src/Component/Login/login.jsx"],"sourcesContent":["import React, { useState,useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport loginPic from \"./images/image.png\";\nimport Swal from \"sweetalert2\";\n\nconst loaderStyles = {\n  width: \"75px\",\n  aspectRatio: \"1\",\n  display: \"grid\",\n};\n\nconst Login = ({ onLogin }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const loginApiLink = \"https://student360-api.onrender.com/api/auth\";\n\n  // useEffect(() => {\n  //   // Check if the user is authenticated (you may need to adjust this based on your authentication logic)\n  //   const isAuthenticated = sessionStorage.getItem(\"accessToken\");\n\n  //   // If authenticated, redirect to another page (e.g., dashboard)\n  //   if (isAuthenticated) {\n  //     navigate(\"/dashboard\");\n  //   }\n  // }, [navigate]);\n  \n  const handleLogin = async () => {\n    try {\n      setIsLoading(true);\n\n      const response = await fetch(loginApiLink, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: email,\n          password: password,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error);\n      }\n\n      const responseData = await response.json();\n      const token = responseData.token;\n\n      sessionStorage.setItem(\"accessToken\", token);\n\n      const Toast = Swal.mixin({\n        toast: true,\n        position: \"top-end\",\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        didOpen: (toast) => {\n          toast.onmouseenter = Swal.stopTimer;\n          toast.onmouseleave = Swal.resumeTimer;\n        },\n      });\n\n      Toast.fire({\n        icon: \"success\",\n        title: `Login successful`,\n      });\n\n      navigate(\"/users\");\n      if (onLogin) {\n        onLogin();\n      }\n    } catch (error) {\n      const Toast = Swal.mixin({\n        toast: true,\n        position: \"top-end\",\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        didOpen: (toast) => {\n          toast.onmouseenter = Swal.stopTimer;\n          toast.onmouseleave = Swal.resumeTimer;\n        },\n      });\n\n      Toast.fire({\n        icon: \"error\",\n        title: `${error.message}`,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col lg:flex-row max-h-screen items-center overflow-hidden bg-white\">\n      <img\n        src={loginPic}\n        alt=\"Login Pic\"\n        className=\"w-full lg:w-1/2 lg:h-screen lg:block hidden object-cover\"\n      />\n      <div className=\"w-full min-h-screen items-center\">\n        <div className=\"flex text-right justify-end\">\n          <Link\n            to=\"/\"\n            className=\"text-2xl flex text-[#3B4FFE] mt-18 lg:mt-16 p-6 font-semibold\"\n          >\n            <h1 className=\"font-serif\">Studenthub</h1>{\" \"}\n            <h1 className=\"text-[#3B4FFE] font-magiona-display\">360</h1>\n          </Link>\n        </div>\n        <div className=\"min-w-screen lg:w-full min-h-screen items-center p-20 lg:p-52\">\n          <h2 className=\"text-2xl text-[#3D50FF] font-semibold mb-4 text-left lg:text-left\">\n            Login\n          </h2>\n          <form className=\"max-w-screen \">\n            <div className=\"mb-4\">\n              <label htmlFor=\"email\" className=\"block text-sm font-medium \">\n                Email address:\n              </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                className=\"mt-1 p-2 w-full border border-black rounded-md\"\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n            <div className=\"mb-4\">\n              <label htmlFor=\"password\" className=\"block text-sm font-medium\">\n                Password:\n              </label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                className=\"mt-1 p-2 w-full border-black border rounded-md bg-white\"\n                onChange={(e) => setPassword(e.target.value)}\n              />\n              <p className=\"text-right text-[#3A4FFE] text-sm mt-1\">\n                <Link to=\"/forgot-password\">Forgot Password?</Link>\n              </p>\n            </div>\n            <Link>\n              <button\n                type=\"button\"\n                className=\"bg-[#3A4FFE] text-white p-2 rounded-md w-full hover:bg-gray-800 font-extrabold\"\n                onClick={handleLogin}\n              >\n                Log In\n              </button>\n            </Link>\n          </form>\n          {isLoading && (\n            <div className=\"loader\" style={loaderStyles}>\n              <div className=\"loader:before\"></div>\n              <div className=\"loader:after\"></div>\n            </div>\n          )}\n          <p className=\"mt-4 text-sm text-center lg:text-center\">\n            Don't have an account?{\" \"}\n            <Link to=\"/signup\" className=\"text-[#3A4FFE]\">\n              Sign Up\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport function get_user() {}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}